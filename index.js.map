{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\nconst API_KEY=\"53351360-25752520852e3bd129b79410f\";\n\nexport function getImagesByQuery(query){\nreturn axios.get(\"\",{params:{\n  key:API_KEY,\n  q:query,\n  image_type: \"photo\",\n  orientation: \"horizontal\",\n  safesearch: true,\n},})\n  .then(response=>{\n    if (!response.data || response.data.hits.length === 0) {\n  iziToast.warning({\n    message: 'На жаль, за вашим запитом зображень не знайдено. Спробуйте ще раз!',\n    position: 'topRight',\n  });\n  return { hits: [] };\n}\n\n      return response.data;\n    })\n\n    .catch(err => {console.error(err);\n    return { hits: [] }})}","\n\nexport function createGallery(images, galleryEl) {\n  if (!images || images.length === 0) return Promise.resolve();\n\n  const galleryObj = images.map(image => ({\n    webformatURL: image.webformatURL,\n    largeImageURL: image.largeImageURL,\n    alt: image.tags,\n    likes: image.likes,\n    views: image.views,\n    comments: image.comments,\n    downloads: image.downloads,\n  }));\n\n  const markup = galleryObj\n    .map(\n      img => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n          <img \n            class=\"gallery-image\"\n            src=\"${img.webformatURL}\"\n            alt=\"${img.alt}\"\n          />\n        </a>\n        <div class=\"gallery-image-info\">\n          <p>Likes: ${img.likes}</p>\n          <p>Views: ${img.views}</p>\n          <p>Comments: ${img.comments}</p>\n          <p>Downloads: ${img.downloads}</p>\n        </div>\n      </li>\n      `\n    )\n    .join('');\n\n  const tempDiv = document.createElement(\"div\");\n  tempDiv.innerHTML = markup;\n\n  const imagesList = tempDiv.querySelectorAll(\"img\");\n\n  const loadPromises = [...imagesList].map(img => {\n    return new Promise(resolve => {\n      if (img.complete) return resolve(); \n      img.onload = resolve;\n      img.onerror = resolve;\n    });\n  });\n\n  \n  return Promise.all(loadPromises).then(() => {\n   galleryEl.innerHTML = markup;\n  });\n}\n\nexport function clearGallery(galleryEl){\n  galleryEl.innerHTML = \"\";\n};\nexport function showLoader(loaderEl){\n  loaderEl.classList.remove(\"hidden\")\n};\nexport function hideLoader(loaderEl){\n  loaderEl.classList.add(\"hidden\")};\n","import {getImagesByQuery} from './js/pixabay-api';\nimport {createGallery, clearGallery, showLoader, hideLoader} from './js/render-functions';\nimport axios from \"axios\";\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\n// refs\nexport const refs={\n  form: document.querySelector('.form'),\n  gallery:document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n}\n// console.log(refs)\nlet galleryImg= new SimpleLightbox ('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\n async function onFormSubmit(event){\nevent.preventDefault();\n \nconst query = event.target.elements[\"search-text\"]?.value.trim();\nif (!query) return;\n\n clearGallery(refs.gallery);\n showLoader(refs.loader);\n\n try{ \n  const data =await getImagesByQuery(query);\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.warning({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;}\n     \n    await createGallery(data.hits, refs.gallery); \n    galleryImg.refresh();\n  }catch (err) {\n    console.error(err);\n  }finally {\n    hideLoader(refs.loader);}\n \n\n}\n// listener\nrefs.form.addEventListener('submit', onFormSubmit)"],"names":["axios","API_KEY","getImagesByQuery","query","response","iziToast","err","createGallery","images","galleryEl","markup","image","img","tempDiv","loadPromises","resolve","clearGallery","showLoader","loaderEl","hideLoader","refs","galleryImg","SimpleLightbox","onFormSubmit","event","_a","data"],"mappings":"owBAIAA,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAQ,qCAEP,SAASC,EAAiBC,EAAM,CACvC,OAAOH,EAAM,IAAI,GAAG,CAAC,OAAO,CAC1B,IAAIC,EACJ,EAAEE,EACF,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAAG,EACA,KAAKC,GACA,CAACA,EAAS,MAAQA,EAAS,KAAK,KAAK,SAAW,GACtDC,EAAS,QAAQ,CACf,QAAS,qEACT,SAAU,UACd,CAAG,EACM,CAAE,KAAM,CAAA,IAGJD,EAAS,IACjB,EAEA,MAAME,IAAQ,QAAQ,MAAMA,CAAG,EACzB,CAAE,KAAM,CAAE,CAAA,EAAG,CAAC,CC1BlB,SAASC,EAAcC,EAAQC,EAAW,CAC/C,GAAI,CAACD,GAAUA,EAAO,SAAW,EAAG,OAAO,QAAQ,UAYnD,MAAME,EAVaF,EAAO,IAAIG,IAAU,CACtC,aAAcA,EAAM,aACpB,cAAeA,EAAM,cACrB,IAAKA,EAAM,KACX,MAAOA,EAAM,MACb,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,UAAWA,EAAM,SAClB,EAAC,EAGC,IACCC,GAAO;AAAA;AAAA,wCAE2BA,EAAI,aAAa;AAAA;AAAA;AAAA,mBAGtCA,EAAI,YAAY;AAAA,mBAChBA,EAAI,GAAG;AAAA;AAAA;AAAA;AAAA,sBAIJA,EAAI,KAAK;AAAA,sBACTA,EAAI,KAAK;AAAA,yBACNA,EAAI,QAAQ;AAAA,0BACXA,EAAI,SAAS;AAAA;AAAA;AAAA,OAIlC,EACA,KAAK,EAAE,EAEJC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAYH,EAIpB,MAAMI,EAAe,CAAC,GAFHD,EAAQ,iBAAiB,KAAK,CAEd,EAAE,IAAID,GAChC,IAAI,QAAQG,GAAW,CAC5B,GAAIH,EAAI,SAAU,OAAOG,IACzBH,EAAI,OAASG,EACbH,EAAI,QAAUG,CACpB,CAAK,CACF,EAGD,OAAO,QAAQ,IAAID,CAAY,EAAE,KAAK,IAAM,CAC3CL,EAAU,UAAYC,CACzB,CAAG,CACH,CAEO,SAASM,EAAaP,EAAU,CACrCA,EAAU,UAAY,EACxB,CACO,SAASQ,EAAWC,EAAS,CAClCA,EAAS,UAAU,OAAO,QAAQ,CACpC,CACO,SAASC,EAAWD,EAAS,CAClCA,EAAS,UAAU,IAAI,QAAQ,CAAC,CChD3B,MAAME,EAAK,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,QAAQ,SAAS,cAAc,UAAU,EACzC,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEA,IAAIC,EAAY,IAAIC,EAAgB,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAGA,eAAeC,EAAaC,EAAM,OACnCA,EAAM,eAAc,EAEpB,MAAMrB,GAAQsB,EAAAD,EAAM,OAAO,SAAS,aAAa,IAAnC,YAAAC,EAAsC,MAAM,OAC1D,GAAKtB,EAEJ,CAAAa,EAAaI,EAAK,OAAO,EACzBH,EAAWG,EAAK,MAAM,EAEtB,GAAG,CACF,MAAMM,EAAM,MAAMxB,EAAiBC,CAAK,EAEtC,GAAI,CAACuB,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACxCrB,EAAS,QAAQ,CACf,QAAS,2EACT,SAAU,UAClB,CAAO,EACD,MAAO,CAET,MAAME,EAAcmB,EAAK,KAAMN,EAAK,OAAO,EAC3CC,EAAW,QAAO,CACnB,OAAOf,EAAK,CACX,QAAQ,MAAMA,CAAG,CACrB,QAAG,CACCa,EAAWC,EAAK,MAAM,CAAE,EAG5B,CAEAA,EAAK,KAAK,iBAAiB,SAAUG,CAAY"}